(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{3777:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},1470:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},9525:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3700:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/[pin]",function(){return n(2486)}])},5491:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var r=n(7642);let SocketManager=class SocketManager{connect(){return this.socket||(this.socket=(0,r.io)(this.url,{transports:["websocket"],autoConnect:!0})),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}emit(e,t){this.socket&&this.socket.emit(e,t)}on(e,t){this.socket&&this.socket.on(e,t)}off(e,t){this.socket&&this.socket.off(e,t)}getSocket(){return this.socket}constructor(){this.socket=null,this.url="http://localhost:3001"}};let s=new SocketManager},2486:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return GameRoom}});var r=n(5893),s=n(7294),i=n(1163),a=n(3495),l=n(8868);function useIsMounted(){let e=(0,s.useRef)(!1);return(0,l.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var c=n(2074);function useForceUpdate(){let e=useIsMounted(),[t,n]=(0,s.useState)(0),r=(0,s.useCallback)(()=>{e.current&&n(t+1)},[t]),i=(0,s.useCallback)(()=>c.Wi.postRender(r),[r]);return[i,t]}var o=n(240),d=n(6681);let PopChildMeasure=class PopChildMeasure extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}};function PopChild({children:e,isPresent:t}){let n=(0,s.useId)(),r=(0,s.useRef)(null),i=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:l}=i.current;if(t||!r.current||!e||!s)return;r.current.dataset.motionPopId=n;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),s.createElement(PopChildMeasure,{isPresent:t,childRef:r,sizeRef:i},s.cloneElement(e,{ref:r}))}let PresenceChild=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l})=>{let c=(0,d.h)(newChildrenMap),u=(0,s.useId)(),m=(0,s.useMemo)(()=>({id:u,initial:t,isPresent:n,custom:i,onExitComplete:e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;r&&r()},register:e=>(c.set(e,!1),()=>c.delete(e))}),a?void 0:[n]);return(0,s.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),s.useEffect(()=>{n||c.size||!r||r()},[n]),"popLayout"===l&&(e=s.createElement(PopChild,{isPresent:n},e)),s.createElement(o.O.Provider,{value:m},e)};function newChildrenMap(){return new Map}var u=n(5364);function useUnmountEffect(e){return(0,s.useEffect)(()=>()=>e(),[])}var m=n(5487);let getChildKey=e=>e.key||"";function updateChildLookup(e,t){e.forEach(e=>{let n=getChildKey(e);t.set(n,e)})}function onlyElements(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let AnimatePresence=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:c="sync"})=>{(0,m.k)(!i,"Replace exitBeforeEnter with mode='wait'");let o=(0,s.useContext)(u.p).forceRender||useForceUpdate()[0],d=useIsMounted(),h=onlyElements(e),x=h,p=(0,s.useRef)(new Map).current,f=(0,s.useRef)(x),y=(0,s.useRef)(new Map).current,g=(0,s.useRef)(!0);if((0,l.L)(()=>{g.current=!1,updateChildLookup(h,y),f.current=x}),useUnmountEffect(()=>{g.current=!0,y.clear(),p.clear()}),g.current)return s.createElement(s.Fragment,null,x.map(e=>s.createElement(PresenceChild,{key:getChildKey(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:a,mode:c},e)));x=[...x];let b=f.current.map(getChildKey),w=h.map(getChildKey),v=b.length;for(let e=0;e<v;e++){let t=b[e];-1!==w.indexOf(t)||p.has(t)||p.set(t,void 0)}return"wait"===c&&p.size&&(x=[]),p.forEach((e,n)=>{if(-1!==w.indexOf(n))return;let i=y.get(n);if(!i)return;let l=b.indexOf(n),u=e;u||(u=s.createElement(PresenceChild,{key:getChildKey(i),isPresent:!1,onExitComplete:()=>{p.delete(n);let e=Array.from(y.keys()).filter(e=>!w.includes(e));if(e.forEach(e=>y.delete(e)),f.current=h.filter(t=>{let r=getChildKey(t);return r===n||e.includes(r)}),!p.size){if(!1===d.current)return;o(),r&&r()}},custom:t,presenceAffectsLayout:a,mode:c},i),p.set(n,u)),x.splice(l,0,u)}),x=x.map(e=>{let t=e.key;return p.has(t)?e:s.createElement(PresenceChild,{key:getChildKey(e),isPresent:!0,presenceAffectsLayout:a,mode:c},e)}),s.createElement(s.Fragment,null,p.size?x:x.map(e=>(0,s.cloneElement)(e)))};var h=n(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,h.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var p=n(9525),f=n(1470),y=n(3777);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,h.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var b=n(5491);function GameRoom(){let e=(0,i.useRouter)(),{pin:t,name:n}=e.query,[l,c]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,w]=(0,s.useState)(!1),[v,j]=(0,s.useState)(0),[k,N]=(0,s.useState)(!1),[C,E]=(0,s.useState)(null),[A,M]=(0,s.useState)(!1),[P,R]=(0,s.useState)(null),[S,q]=(0,s.useState)(null),L=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t||!n)return;let e=b.B.connect();return e.on("connect",()=>{N(!0),e.emit("join-game",{pin:t,playerName:n})}),e.on("player-joined",e=>{console.log("Player joined:",e)}),e.on("game-started",e=>{c(e),console.log("Game started:",e)}),e.on("question-started",e=>{console.log("Question started:",e.question),console.log("Question correctAnswer:",e.question.correctAnswer),d(e.question),j(e.timeLimit),m(null),q(null),L.current=null,w(!1),M(!1),R(null);let t=setInterval(()=>{j(e=>e<=1?(clearInterval(t),0):e-1)},1e3)}),e.on("question-ended",e=>{console.log("Question ended - userAnswerRef.current:",L.current,"correctAnswer:",e.correctAnswer),console.log("Comparison result:",L.current===e.correctAnswer),console.log("userAnswerRef.current type:",typeof L.current,"correctAnswer type:",typeof e.correctAnswer),M(!0),R({isCorrect:L.current===e.correctAnswer,correctAnswer:e.correctAnswer})}),e.on("leaderboard-updated",e=>{c(t=>t?{...t,players:e.leaderboard}:null)}),e.on("game-ended",e=>{c(t=>t?{...t,gameEnded:!0,players:e.finalLeaderboard}:null)}),e.on("error",e=>{E(e.message)}),()=>{b.B.disconnect()}},[t,n]);let submitAnswer=e=>{if(h||!o)return;console.log("Submitting answer:",e,"for question:",o.id),console.log("Current question correctAnswer:",o.correctAnswer),console.log("Answer comparison:",e===o.correctAnswer),m(e),q(e),L.current=e,w(!0);let t=b.B.getSocket();if(t){let n={questionId:o.id,answerIndex:e,timeToAnswer:o.timeLimit-v};console.log("Sending submit-answer data:",n),t.emit("submit-answer",n)}};if(C)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-red-900 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"game-card max-w-md text-center",children:[(0,r.jsx)(x,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Game Error"}),(0,r.jsx)("p",{className:"text-gray-300 mb-6",children:C}),(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"btn-primary",children:"Go Home"})]})});if(!k)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,r.jsx)("p",{children:"Connecting to game..."})]})});if(!o&&!(null==l?void 0:l.gameEnded))return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:(0,r.jsxs)(a.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"game-card max-w-md text-center",children:[(0,r.jsx)(p.Z,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Waiting for Game"}),(0,r.jsx)("p",{className:"text-gray-300 mb-6",children:"You've joined the game! Waiting for the host to start..."}),(0,r.jsxs)("div",{className:"bg-blue-500/20 text-blue-300 px-4 py-2 rounded-lg font-mono text-xl",children:["PIN: ",t]})]})});if(null==l?void 0:l.gameEnded){let t=[...l.players||[]].sort((e,t)=>t.score-e.score),s=t.findIndex(e=>e.name===n)+1;return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-900 via-orange-900 to-red-900 p-4",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,r.jsx)(f.Z,{className:"h-16 w-16 text-yellow-400 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Game Over!"}),(0,r.jsxs)("p",{className:"text-xl text-gray-300",children:["You finished #",s," out of ",t.length," players"]})]}),(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-4",children:t.slice(0,10).map((e,t)=>(0,r.jsxs)(a.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"leaderboard-item flex items-center justify-between ".concat(e.name===n?"ring-2 ring-yellow-400":""," ").concat(t<3?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20":""),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-gray-400"),children:["#",t+1]}),(0,r.jsx)("span",{className:"text-white font-semibold",children:e.name})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:e.score})]},e.id))}),(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center mt-8",children:(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"btn-primary",children:"Play Again"})})]})})}return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center space-x-6 mb-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5 text-blue-400"}),(0,r.jsxs)("span",{className:"text-2xl font-bold ".concat(v<=5?"text-red-400 animate-pulse":"text-white"),children:[v,"s"]})]})}),(0,r.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-4 overflow-hidden",children:(0,r.jsx)(a.E.div,{className:"h-full ".concat(v<=5?"bg-red-500":"bg-blue-500"),initial:{width:"100%"},animate:{width:"".concat(v/((null==o?void 0:o.timeLimit)||30)*100,"%")},transition:{duration:1,ease:"linear"}})})]}),o&&(0,r.jsx)(a.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"game-card mb-6",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:o.text})}),(0,r.jsxs)(AnimatePresence,{children:[o&&!A&&(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:o.options.map((e,t)=>(0,r.jsxs)(a.E.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},onClick:()=>submitAnswer(t),disabled:h,className:"w-full p-4 rounded-xl text-left font-semibold transition-all transform ".concat(u===t?"bg-blue-500 text-white scale-105 shadow-lg":h?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 hover:scale-105 border border-white/30"),children:[(0,r.jsxs)("span",{className:"text-lg",children:[String.fromCharCode(65+t),"."]})," ",e]},t))}),A&&P&&(0,r.jsx)(a.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:(0,r.jsxs)("div",{className:"game-card ".concat(P.isCorrect?"bg-green-500/20":"bg-red-500/20"),children:[P.isCorrect?(0,r.jsx)(g,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}):(0,r.jsx)(x,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold mb-2 ".concat(P.isCorrect?"text-green-400":"text-red-400"),children:P.isCorrect?"Correct!":"Incorrect!"}),(0,r.jsxs)("p",{className:"text-gray-300 mb-4",children:["The correct answer was: ",null==o?void 0:o.options[P.correctAnswer]]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Waiting for next question..."})]})})]})]})})}}},function(e){e.O(0,[406,642,774,888,179],function(){return e(e.s=3700)}),_N_E=e.O()}]);