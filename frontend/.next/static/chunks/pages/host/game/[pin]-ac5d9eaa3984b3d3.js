(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{9482:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},3777:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},1470:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},9525:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3081:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/host/game/[pin]",function(){return s(7488)}])},5491:function(e,t,s){"use strict";s.d(t,{B:function(){return i}});var a=s(7642);let SocketManager=class SocketManager{connect(){return this.socket||(this.socket=(0,a.io)(this.url,{transports:["websocket"],autoConnect:!0})),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}emit(e,t){this.socket&&this.socket.emit(e,t)}on(e,t){this.socket&&this.socket.on(e,t)}off(e,t){this.socket&&this.socket.off(e,t)}getSocket(){return this.socket}constructor(){this.socket=null,this.url="http://localhost:3001"}};let i=new SocketManager},7488:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return HostGameRoom}});var a=s(5893),i=s(7294),n=s(1163),l=s(3495),r=s(9525),c=s(9482),o=s(4297);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),m=(0,o.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var x=s(3777),h=s(1470),u=s(5491);function HostGameRoom(){var e,t;let s=(0,n.useRouter)(),{pin:o}=s.query,[p,g]=(0,i.useState)(null),[y,f]=(0,i.useState)([]),[j,b]=(0,i.useState)(null),[N,v]=(0,i.useState)(0),[w,k]=(0,i.useState)(!1),[S,E]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!o)return;let e=JSON.parse(localStorage.getItem("quizzes")||"[]"),t=e.find(e=>e.pin===o);if(!t){s.push("/host/dashboard");return}let a=u.B.connect();return a.emit("host-join-game",{pin:o,quiz:t}),a.on("host-joined",e=>{g({quiz:e.quiz,players:[],currentQuestionIndex:e.gameState.currentQuestionIndex,isActive:e.gameState.isActive,isPaused:e.gameState.isPaused,timeRemaining:0,showResults:!1,gameEnded:e.gameState.gameEnded})}),a.on("player-joined",e=>{f(t=>[...t.filter(t=>t.id!==e.player.id),e.player])}),a.on("player-left",e=>{f(t=>t.filter(t=>t.id!==e.playerId))}),a.on("question-started",e=>{b(e.question),v(e.timeLimit);let t=setInterval(()=>{v(e=>e<=1?(clearInterval(t),0):e-1)},1e3)}),a.on("leaderboard-updated",e=>{f(e.leaderboard)}),a.on("game-ended",e=>{f(e.finalLeaderboard),g(e=>e?{...e,gameEnded:!0}:null)}),a.on("game-paused",e=>{k(e.isPaused)}),a.on("error",e=>{console.error("Game error:",e.message),alert("Game Error: ".concat(e.message))}),()=>{u.B.disconnect()}},[o]);let startGame=()=>{let e=u.B.getSocket();e&&o&&(console.log("Starting game with PIN:",o),e.emit("start-game",{pin:o}),E(!0))},kickPlayer=e=>{let t=u.B.getSocket();t&&o&&t.emit("kick-player",{pin:o,playerId:e})};return p?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 p-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:null===(e=p.quiz)||void 0===e?void 0:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsxs)("div",{className:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-lg font-mono text-lg",children:["PIN: ",o]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-300",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[y.length," players"]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{let e=u.B.getSocket();e&&o&&e.emit("pause-game",{pin:o})},className:"btn-secondary flex items-center space-x-2",children:[w?(0,a.jsx)(c.Z,{className:"h-5 w-5"}):(0,a.jsx)(d,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:w?"Resume":"Pause"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=u.B.getSocket();e&&o&&e.emit("end-game",{pin:o})},className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-all flex items-center space-x-2",children:[(0,a.jsx)(m,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"End Game"})]})]}):(0,a.jsxs)("button",{onClick:startGame,disabled:0===y.length,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Start Game"})]})})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[j&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"game-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white",children:["Question ",(p.currentQuestionIndex||0)+1," of ",null===(t=p.quiz)||void 0===t?void 0:t.questions.length]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("span",{className:"text-2xl font-bold ".concat(N<=5?"text-red-400 animate-pulse":"text-white"),children:[N,"s"]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-6 overflow-hidden",children:(0,a.jsx)(l.E.div,{className:"h-full ".concat(N<=5?"bg-red-500":"bg-blue-500"),initial:{width:"100%"},animate:{width:"".concat(N/j.timeLimit*100,"%")},transition:{duration:1,ease:"linear"}})}),(0,a.jsx)("h3",{className:"text-2xl font-semibold text-white mb-4",children:j.text}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:j.options.map((e,t)=>(0,a.jsx)("div",{className:"p-3 rounded-lg transition-all ".concat(t===j.correctAnswer?"bg-green-500/20 border border-green-400":"bg-white/10 border border-white/20"),children:(0,a.jsxs)("span",{className:"text-white",children:[(0,a.jsxs)("span",{className:"font-bold",children:[String.fromCharCode(65+t),"."]})," ",e]})},t))})]}),!S&&(0,a.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"game-card text-center",children:[(0,a.jsx)(c.Z,{className:"h-16 w-16 text-blue-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Start"}),(0,a.jsx)("p",{className:"text-gray-300 mb-6",children:y.length>0?"".concat(y.length," player").concat(y.length>1?"s":""," waiting to play"):"Waiting for players to join..."}),y.length>0&&(0,a.jsx)("button",{onClick:startGame,className:"btn-primary",children:"Start Game Now"})]}),p.gameEnded&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"game-card text-center",children:[(0,a.jsx)(h.Z,{className:"h-16 w-16 text-yellow-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Game Complete!"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Check out the final leaderboard on the right"})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"game-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-yellow-400"}),(0,a.jsx)("span",{children:p.gameEnded?"Final Results":"Leaderboard"})]}),(0,a.jsxs)("span",{className:"text-gray-300",children:[y.length," players"]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[y.sort((e,t)=>t.score-e.score).map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-center justify-between p-3 rounded-lg transition-all ".concat(t<3?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20":"bg-white/10"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-lg font-bold ".concat(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-gray-400"),children:["#",t+1]}),(0,a.jsx)("span",{className:"text-white font-medium truncate",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-yellow-400 font-bold",children:e.score}),!p.gameEnded&&(0,a.jsx)("button",{onClick:()=>kickPlayer(e.id),className:"text-red-400 hover:text-red-300 text-xs p-1 rounded hover:bg-red-500/20 transition-all",children:"✕"})]})]},e.id)),0===y.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,a.jsx)(r.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No players yet"}),(0,a.jsxs)("p",{className:"text-sm",children:["Share the PIN: ",(0,a.jsx)("strong",{children:o})]})]})]})]})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,a.jsx)("p",{children:"Setting up game..."})]})})}}},function(e){e.O(0,[406,642,774,888,179],function(){return e(e.s=3081)}),_N_E=e.O()}]);